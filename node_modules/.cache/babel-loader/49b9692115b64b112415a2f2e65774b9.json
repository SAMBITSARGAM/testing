{"ast":null,"code":"import _defineProperty from\"C:/Users/sambi/Downloads/depos-interface-master/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/sambi/Downloads/depos-interface-master/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/sambi/Downloads/depos-interface-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/sambi/Downloads/depos-interface-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\sambi\\\\Downloads\\\\depos-interface-master\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useMemo,useState}from\"react\";import{Avatar,Box,Button,Card,Container,Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle,InputAdornment,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TextField,Typography}from\"@mui/material\";import{Colors}from\"../constants/colors\";import{AdapterDateFns}from\"@mui/x-date-pickers/AdapterDateFns\";import{LocalizationProvider}from\"@mui/x-date-pickers/LocalizationProvider\";import{DatePicker}from\"@mui/x-date-pickers/DatePicker\";import{addDays,differenceInDays,format}from\"date-fns\";import{initWeb3Account,timeDeposit,getAllowance,approval,withdraw,viewDeposits}from\"../types/proxy\";import BaseColoredButton from\"./BaseColoredButton\";import{USDC}from\"../constants/contractAddresses\";import{LoadingButton}from\"@mui/lab\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Title=function Title(_ref){var children=_ref.children;return/*#__PURE__*/_jsx(Typography,{sx:{color:Colors.grey50},children:children});};// const COINS = [\"ethereum\", \"usd-coin\", \"wrapped-bitcoin\"];\nvar COINS=[\"usd-coin\"];var digit=new RegExp(\"^(-?\\\\d+.?(\\\\d+)?)$\");var ONE_MONTH=30;var THREE_MONTH=90;var HALF_YEAR=180;var SimpleDeposit=function SimpleDeposit(){var today=useMemo(function(){var date=new Date();date.setHours(0,0,0,0);return date;},[]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),coins=_useState2[0],setCoins=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedCoin=_useState4[0],setSelectedCoin=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),value=_useState6[0],setValue=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),currencyValue=_useState8[0],setCurrencyValue=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),isValueValid=_useState10[0],setValueValid=_useState10[1];var _useState11=useState(addDays(today,ONE_MONTH)),_useState12=_slicedToArray(_useState11,2),selectedDate=_useState12[0],setSelectedDate=_useState12[1];var _useState13=useState(ONE_MONTH),_useState14=_slicedToArray(_useState13,2),storageDuration=_useState14[0],setStorageDuration=_useState14[1];useEffect(function(){fetch(\"https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=\".concat(COINS.join(\"%2C\"))).then(function(res){return res.json();}).then(function(data){setCoins(data);});},[]);useEffect(function(){if(coins.length>0){setSelectedCoin(coins[0]);}},[coins]);useEffect(function(){if(isValueValid&&selectedCoin){var v=parseFloat(value)*selectedCoin.current_price||0;setCurrencyValue(v);}else{setCurrencyValue(0);}},[value,isValueValid,selectedCoin]);useEffect(function(){setStorageDuration(differenceInDays(selectedDate,today));},[selectedDate,today]);var onValueChange=function onValueChange(e){var value=e.target.value;if(value!==\"\"){if(value.startsWith(\"-\")){setValueValid(false);}else{setValueValid(digit.test(value));}}else{setValueValid(true);}setValue(value);};var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),account=_useState16[0],setAccount=_useState16[1];var getAccountCB=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(web3,account){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setAccount(account);case 1:case\"end\":return _context.stop();}}},_callee);}));return function getAccountCB(_x,_x2){return _ref2.apply(this,arguments);};}();useEffect(function(){if(account){handleAllowance();handleViewDeposits();}},[account]);var handleConnectWallet=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return initWeb3Account(getAccountCB);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handleConnectWallet(){return _ref3.apply(this,arguments);};}();var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isDepositing=_useState18[0],setDepositing=_useState18[1];var handleTimeDeposit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setDepositing(true);_context3.next=3;return timeDeposit(account,USDC,BigInt(value)*BigInt(Math.pow(10,18)),storageDuration*24*60*60,function(receipt){console.log(receipt);setDepositing(false);handleViewDeposits();},function(error){console.log(error);setDepositing(false);handleErrorMessage(error,\"Deposit Failed\");});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function handleTimeDeposit(){return _ref4.apply(this,arguments);};}();var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),shouldShowApproval=_useState20[0],setShowApproval=_useState20[1];var handleAllowance=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var allowance;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getAllowance(account);case 2:allowance=_context4.sent;console.log(\"allowance\",allowance);if(parseInt(allowance)===0){setShowApproval(true);}else{setShowApproval(false);}case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function handleAllowance(){return _ref5.apply(this,arguments);};}();var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isApproving=_useState22[0],setApproving=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),errorMessage=_useState24[0],setErrorMessage=_useState24[1];var handleErrorMessage=function handleErrorMessage(error,placeholder){if(typeof error===\"string\"){setErrorMessage(error);return;}if(typeof error===\"object\"){if(error.message){setErrorMessage(error.message);}return;}setErrorMessage(placeholder);};var handleApproval=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;setApproving(true);_context5.next=4;return approval(account);case 4:setApproving(false);setShowApproval(false);_context5.next=15;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](0);console.error(_context5.t0);setApproving(false);handleErrorMessage(_context5.t0,\"Approval failed\");setAccount(\"\");setShowApproval(false);case 15:case\"end\":return _context5.stop();}}},_callee5,null,[[0,8]]);}));return function handleApproval(){return _ref6.apply(this,arguments);};}();var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),deposits=_useState26[0],setDeposits=_useState26[1];var handleViewDeposits=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var result;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return viewDeposits(account);case 2:result=_context6.sent.map(function(d){var _d=_slicedToArray(d,7),user=_d[0],asset=_d[1],id=_d[2],time=_d[3],amount=_d[4],price=_d[5],isWithdraw=_d[6];return{user:user,asset:asset,id:id,time:\"\".concat(format(new Date(parseInt(time)*1000),\"yyyy/MM/dd\")),amount:\"\".concat(BigInt(amount)/BigInt(Math.pow(10,18))),price:\"$ \".concat(parseInt(price)/1000000),isWithdraw:isWithdraw};});setDeposits(result.filter(function(d){return!d.isWithdraw;}));case 4:case\"end\":return _context6.stop();}}},_callee6);}));return function handleViewDeposits(){return _ref7.apply(this,arguments);};}();var handleRejectApproval=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:setAccount(\"\");setShowApproval(false);case 2:case\"end\":return _context7.stop();}}},_callee7);}));return function handleRejectApproval(){return _ref8.apply(this,arguments);};}();var setWithdrawing=function setWithdrawing(value,id){setWithdrawingTable(_objectSpread(_objectSpread({},withdrawingTable),_defineProperty({},id,value)));};var _useState27=useState({}),_useState28=_slicedToArray(_useState27,2),withdrawingTable=_useState28[0],setWithdrawingTable=_useState28[1];useEffect(function(){setWithdrawingTable(deposits.reduce(function(acc,cur){acc[cur.id]=false;return acc;},{}));},[deposits]);var handleWithdraw=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(id){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:setWithdrawing(true,\"\".concat(id));_context8.next=3;return withdraw(account,id,function(receipt){console.log(receipt);setWithdrawing(false,\"\".concat(id));handleViewDeposits();},function(error){setWithdrawing(false,\"\".concat(id));console.error(error);handleErrorMessage(error,\"Withdraw failed\");});case 3:case\"end\":return _context8.stop();}}},_callee8);}));return function handleWithdraw(_x3){return _ref9.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",sx:{mb:2,paddingY:10},children:[/*#__PURE__*/_jsxs(Box,{sx:{width:\"960px\",marginLeft:\"auto\",marginRight:\"auto\"},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"span\",color:Colors.blue100,children:\"Deposit now\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"span\",children:\"Calculator\"})]}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Card,{variant:\"outlined\",sx:{width:400,padding:2,borderRadius:4,borderColor:Colors.black100},children:[/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"},children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",children:\"You pay\"})}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsx(Box,{sx:{alignSelf:\"flex-end\"},children:/*#__PURE__*/_jsx(TextField,{type:\"text\",error:!isValueValid,value:value,placeholder:\"0\",onChange:onValueChange,sx:{m:1,width:\"25ch\",textAlign:\"right\"},variant:\"standard\",inputProps:{min:0,style:{textAlign:\"right\"}},InputProps:{disableUnderline:true,endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(Typography,{sx:{fontSize:16,fontWeight:\"bold\"},children:selectedCoin===null||selectedCoin===void 0?void 0:selectedCoin.symbol.toUpperCase()})})}})}),/*#__PURE__*/_jsx(Box,{sx:{alignSelf:\"flex-end\",paddingRight:2},children:/*#__PURE__*/_jsxs(Typography,{children:[\"= $ \",currencyValue.toFixed(2)]})})]})]}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"row\",justifyContent:\"flex-start\",mt:2},children:coins.map(function(coin){return/*#__PURE__*/_jsxs(Button,{component:\"span\",sx:{display:\"flex\",flexDirection:\"row\",alignItems:\"center\",border:\"1px solid grey\",padding:1,borderRadius:4,mr:1},onClick:function onClick(){return setSelectedCoin(coin);},children:[/*#__PURE__*/_jsx(Avatar,{alt:coin.id,src:coin.image,sx:{marginRight:1,width:24,height:24}}),/*#__PURE__*/_jsx(Typography,{color:Colors.black100,children:coin.symbol.toUpperCase()})]},\"coin-\".concat(coin.id));})})]}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Card,{variant:\"outlined\",sx:{width:400,padding:2,borderRadius:4,borderColor:Colors.black100},children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"bold\",children:\"Storage duration\"})}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",mt:2},children:[/*#__PURE__*/_jsx(Button,{sx:{border:\"1px solid grey\",borderRadius:8,borderColor:storageDuration===ONE_MONTH?Colors.black100:Colors.grey50},onClick:function onClick(){setStorageDuration(ONE_MONTH);setSelectedDate(addDays(today,ONE_MONTH));},children:/*#__PURE__*/_jsx(Typography,{fontSize:14,color:storageDuration===ONE_MONTH?Colors.black100:Colors.grey50,children:\"One month\"})}),/*#__PURE__*/_jsx(Button,{sx:{border:\"1px solid grey\",borderRadius:8,borderColor:storageDuration===THREE_MONTH?Colors.black100:Colors.grey50},onClick:function onClick(){setStorageDuration(THREE_MONTH);setSelectedDate(addDays(today,THREE_MONTH));},children:/*#__PURE__*/_jsx(Typography,{fontSize:14,color:storageDuration===THREE_MONTH?Colors.black100:Colors.grey50,children:\"Three months\"})}),/*#__PURE__*/_jsx(Button,{sx:{border:\"1px solid grey\",borderRadius:8,borderColor:storageDuration===HALF_YEAR?Colors.black100:Colors.grey50},onClick:function onClick(){setStorageDuration(HALF_YEAR);setSelectedDate(addDays(today,HALF_YEAR));},children:/*#__PURE__*/_jsx(Typography,{fontSize:14,color:storageDuration===HALF_YEAR?Colors.black100:Colors.grey50,children:\"Half year\"})})]}),/*#__PURE__*/_jsx(Box,{sx:{mt:1,mb:2},children:/*#__PURE__*/_jsx(Typography,{children:\"Customization\"})}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"row\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Box,{sx:{mr:2},children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(DatePicker,{disabled:true,todayText:\"Today\",label:\"Start\",value:today,onChange:function onChange(newValue){// handleDateChange(newValue);\n},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread({},params));}})})}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(DatePicker,{label:\"End\",value:selectedDate,onChange:function onChange(newValue){newValue&&setSelectedDate(newValue);},shouldDisableDate:function shouldDisableDate(day){if(day){day.setHours(0,0,0,0);return differenceInDays(day,today)<30;}return false;},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread({},params));}})})})]})]})})]}),account?/*#__PURE__*/_jsxs(Box,{sx:{mt:2,display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(Typography,{children:[\"Your account: \",account]}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"row\",gap:3},children:/*#__PURE__*/_jsx(BaseColoredButton,{loading:isDepositing,sx:{height:32},onClick:handleTimeDeposit,disable:BigInt(value)<=0,children:/*#__PURE__*/_jsx(Typography,{children:\"Deposit now\"})})})]}):/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",mt:2},children:!account&&/*#__PURE__*/_jsx(BaseColoredButton,{sx:{height:32},onClick:handleConnectWallet,children:/*#__PURE__*/_jsx(Typography,{children:\"Connect Wallet\"})})})]}),/*#__PURE__*/_jsxs(Dialog,{open:shouldShowApproval,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Please approve for Deposit\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{id:\"alert-dialog-description\",children:\"We detected that you have not approved an allowance to Deposit\"})}),/*#__PURE__*/_jsx(DialogActions,{children:isApproving?/*#__PURE__*/_jsx(LoadingButton,{loading:true}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleRejectApproval,children:\"Disagree\"}),/*#__PURE__*/_jsx(Button,{onClick:handleApproval,autoFocus:true,children:\"Ok, Approve\"})]})})]}),/*#__PURE__*/_jsxs(Dialog,{open:!!errorMessage,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Transaction Failed\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(DialogContentText,{id:\"alert-dialog-description\",children:[\"Transaction has failed, reason: \",errorMessage]})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setErrorMessage(\"\");},autoFocus:true,children:\"Close\"})})]})]}),deposits.length>0&&/*#__PURE__*/_jsxs(Box,{sx:{mt:8},children:[/*#__PURE__*/_jsx(Typography,{color:Colors.black100,textAlign:\"center\",variant:\"h4\",children:\"Your Deposits\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,sx:{width:\"100%\",mt:2},children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Title,{children:\"ID\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Title,{children:\"Asset\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Title,{children:\"Time\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Title,{children:\"Amount\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Title,{children:\"Price\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Title,{children:\"Action\"})})]})}),/*#__PURE__*/_jsx(TableBody,{children:deposits.map(function(d){return/*#__PURE__*/_jsxs(TableRow,{sx:{\"&:last-child td, &:last-child th\":{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{sx:{display:\"flex\",flexDirection:\"row\",alignItems:\"center\",fontSize:16,justifyContent:\"flex-start\"},children:d.id}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:selectedCoin?/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"row\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Avatar,{alt:selectedCoin.id,src:selectedCoin.image,sx:{marginRight:1,width:24,height:24}}),/*#__PURE__*/_jsx(Typography,{color:Colors.black100,children:selectedCoin.symbol.toUpperCase()})]}):/*#__PURE__*/_jsx(Typography,{children:d.asset})}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:d.time}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:d.amount}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:d.price}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",valign:\"middle\",children:!d.isWithdraw&&/*#__PURE__*/_jsx(BaseColoredButton,{loading:withdrawingTable[d.id],sx:{height:32,mt:0},onClick:function onClick(){return handleWithdraw(parseInt(d.id));},children:/*#__PURE__*/_jsx(Typography,{children:\"Withdraw\"})})})]},d.id);})})]})})]})]});};export default SimpleDeposit;","map":{"version":3,"names":["React","useEffect","useMemo","useState","Avatar","Box","Button","Card","Container","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","InputAdornment","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TextField","Typography","Colors","AdapterDateFns","LocalizationProvider","DatePicker","addDays","differenceInDays","format","initWeb3Account","timeDeposit","getAllowance","approval","withdraw","viewDeposits","BaseColoredButton","USDC","LoadingButton","Title","children","color","grey50","COINS","digit","RegExp","ONE_MONTH","THREE_MONTH","HALF_YEAR","SimpleDeposit","today","date","Date","setHours","coins","setCoins","selectedCoin","setSelectedCoin","value","setValue","currencyValue","setCurrencyValue","isValueValid","setValueValid","selectedDate","setSelectedDate","storageDuration","setStorageDuration","fetch","join","then","res","json","data","length","v","parseFloat","current_price","onValueChange","e","target","startsWith","test","account","setAccount","getAccountCB","web3","handleAllowance","handleViewDeposits","handleConnectWallet","isDepositing","setDepositing","handleTimeDeposit","BigInt","receipt","console","log","error","handleErrorMessage","shouldShowApproval","setShowApproval","allowance","parseInt","isApproving","setApproving","errorMessage","setErrorMessage","placeholder","message","handleApproval","deposits","setDeposits","result","map","d","user","asset","id","time","amount","price","isWithdraw","filter","handleRejectApproval","setWithdrawing","setWithdrawingTable","withdrawingTable","reduce","acc","cur","handleWithdraw","mb","paddingY","width","marginLeft","marginRight","display","flexDirection","alignItems","blue100","justifyContent","padding","borderRadius","borderColor","black100","alignSelf","m","textAlign","min","style","disableUnderline","endAdornment","fontSize","fontWeight","symbol","toUpperCase","paddingRight","toFixed","mt","coin","border","mr","image","height","newValue","params","day","gap"],"sources":["C:/Users/sambi/Downloads/depos-interface-master/src/components/SimpleDeposit.tsx"],"sourcesContent":["import React, {\n  FC,\n  FunctionComponent,\n  PropsWithChildren,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport {\n  Avatar,\n  Box,\n  Button,\n  Card,\n  Container,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  InputAdornment,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport { Colors } from \"../constants/colors\";\nimport { CoinMarketInfo, TimeDeposit } from \"../types\";\nimport { AdapterDateFns } from \"@mui/x-date-pickers/AdapterDateFns\";\nimport { LocalizationProvider } from \"@mui/x-date-pickers/LocalizationProvider\";\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\nimport { addDays, differenceInDays, format } from \"date-fns\";\nimport {\n  initWeb3Account,\n  timeDeposit,\n  getAllowance,\n  approval,\n  withdraw,\n  viewDeposits,\n} from \"../types/proxy\";\nimport BaseColoredButton from \"./BaseColoredButton\";\nimport { USDC } from \"../constants/contractAddresses\";\nimport { LoadingButton } from \"@mui/lab\";\n\nconst Title: FunctionComponent<PropsWithChildren<any>> = ({ children }) => {\n  return <Typography sx={{ color: Colors.grey50 }}>{children}</Typography>;\n};\n\n// const COINS = [\"ethereum\", \"usd-coin\", \"wrapped-bitcoin\"];\nconst COINS = [\"usd-coin\"];\n\nconst digit = new RegExp(\"^(-?\\\\d+.?(\\\\d+)?)$\");\n\nconst ONE_MONTH = 30;\nconst THREE_MONTH = 90;\nconst HALF_YEAR = 180;\n\nconst SimpleDeposit: FC = () => {\n  const today = useMemo(() => {\n    const date = new Date();\n    date.setHours(0, 0, 0, 0);\n    return date;\n  }, []);\n\n  const [coins, setCoins] = useState<CoinMarketInfo[]>([]);\n  const [selectedCoin, setSelectedCoin] = useState<CoinMarketInfo | null>(null);\n  const [value, setValue] = useState(\"\");\n  const [currencyValue, setCurrencyValue] = useState(0);\n  const [isValueValid, setValueValid] = useState(true);\n  const [selectedDate, setSelectedDate] = useState<Date>(\n    addDays(today, ONE_MONTH)\n  );\n  const [storageDuration, setStorageDuration] = useState(ONE_MONTH);\n\n  useEffect(() => {\n    fetch(\n      `https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${COINS.join(\n        \"%2C\"\n      )}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        setCoins(data);\n      });\n  }, []);\n  useEffect(() => {\n    if (coins.length > 0) {\n      setSelectedCoin(coins[0]);\n    }\n  }, [coins]);\n  useEffect(() => {\n    if (isValueValid && selectedCoin) {\n      const v = parseFloat(value) * selectedCoin.current_price || 0;\n      setCurrencyValue(v);\n    } else {\n      setCurrencyValue(0);\n    }\n  }, [value, isValueValid, selectedCoin]);\n\n  useEffect(() => {\n    setStorageDuration(differenceInDays(selectedDate, today));\n  }, [selectedDate, today]);\n\n  const onValueChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    if (value !== \"\") {\n      if (value.startsWith(\"-\")) {\n        setValueValid(false);\n      } else {\n        setValueValid(digit.test(value));\n      }\n    } else {\n      setValueValid(true);\n    }\n    setValue(value);\n  };\n\n  const [account, setAccount] = useState(\"\");\n\n  const getAccountCB = async (web3: any, account: string) => {\n    setAccount(account);\n  };\n\n  useEffect(() => {\n    if (account) {\n      handleAllowance();\n      handleViewDeposits();\n    }\n  }, [account]);\n\n  const handleConnectWallet = async () => {\n    await initWeb3Account(getAccountCB);\n  };\n\n  const [isDepositing, setDepositing] = useState(false);\n\n  const handleTimeDeposit = async () => {\n    setDepositing(true);\n    await timeDeposit(\n      account,\n      USDC,\n      BigInt(value) * BigInt(10 ** 18),\n      storageDuration * 24 * 60 * 60,\n      (receipt: any) => {\n        console.log(receipt);\n        setDepositing(false);\n        handleViewDeposits();\n      },\n      (error: any) => {\n        console.log(error);\n        setDepositing(false);\n        handleErrorMessage(error, \"Deposit Failed\");\n      }\n    );\n  };\n\n  const [shouldShowApproval, setShowApproval] = useState(false);\n\n  const handleAllowance = async () => {\n    const allowance = await getAllowance(account);\n    console.log(\"allowance\", allowance);\n    if (parseInt(allowance) === 0) {\n      setShowApproval(true);\n    } else {\n      setShowApproval(false);\n    }\n  };\n\n  const [isApproving, setApproving] = useState(false);\n\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const handleErrorMessage = (error: any, placeholder: string) => {\n    if (typeof error === \"string\") {\n      setErrorMessage(error);\n      return;\n    }\n    if (typeof error === \"object\") {\n      if (error.message) {\n        setErrorMessage(error.message);\n      }\n      return;\n    }\n    setErrorMessage(placeholder);\n  };\n\n  const handleApproval = async () => {\n    try {\n      setApproving(true);\n      await approval(account);\n      setApproving(false);\n      setShowApproval(false);\n    } catch (error) {\n      console.error(error);\n      setApproving(false);\n      handleErrorMessage(error, \"Approval failed\");\n      setAccount(\"\");\n      setShowApproval(false);\n    }\n  };\n\n  const [deposits, setDeposits] = useState<TimeDeposit[]>([]);\n\n  const handleViewDeposits = async () => {\n    const result = (\n      (await viewDeposits(account)) as [\n        [string, string, string, string, string, string, boolean]\n      ]\n    ).map((d) => {\n      const [user, asset, id, time, amount, price, isWithdraw] = d;\n      return {\n        user,\n        asset,\n        id,\n        time: `${format(new Date(parseInt(time) * 1000), \"yyyy/MM/dd\")}`,\n        amount: `${BigInt(amount) / BigInt(10 ** 18)}`,\n        price: `$ ${parseInt(price) / 1000000}`,\n        isWithdraw,\n      };\n    });\n    setDeposits(result.filter((d) => !d.isWithdraw));\n  };\n\n  const handleRejectApproval = async () => {\n    setAccount(\"\");\n    setShowApproval(false);\n  };\n\n  const setWithdrawing = (value: boolean, id: string) => {\n    setWithdrawingTable({\n      ...withdrawingTable,\n      ...{ [id]: value },\n    });\n  };\n\n  const [withdrawingTable, setWithdrawingTable] = useState<{\n    [id: string]: boolean;\n  }>({});\n\n  useEffect(() => {\n    setWithdrawingTable(\n      deposits.reduce<{ [id: string]: boolean }>((acc, cur) => {\n        acc[cur.id] = false;\n        return acc;\n      }, {})\n    );\n  }, [deposits]);\n\n  const handleWithdraw = async (id: number) => {\n    setWithdrawing(true, `${id}`);\n    await withdraw(\n      account,\n      id,\n      (receipt: any) => {\n        console.log(receipt);\n        setWithdrawing(false, `${id}`);\n        handleViewDeposits();\n      },\n      (error: any) => {\n        setWithdrawing(false, `${id}`);\n        console.error(error);\n        handleErrorMessage(error, \"Withdraw failed\");\n      }\n    );\n  };\n\n  return (\n    <Container\n      maxWidth={\"xl\"}\n      sx={{\n        mb: 2,\n        paddingY: 10,\n      }}\n    >\n      <Box sx={{ width: \"960px\", marginLeft: \"auto\", marginRight: \"auto\" }}>\n        <Box\n          sx={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            mb: 2,\n          }}\n        >\n          <Typography variant={\"h6\"} component={\"span\"} color={Colors.blue100}>\n            Deposit now\n          </Typography>\n          <Typography variant={\"h4\"} component={\"span\"}>\n            Calculator\n          </Typography>\n        </Box>\n        <Box>\n          <Box\n            sx={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Box>\n              <Card\n                variant={\"outlined\"}\n                sx={{\n                  width: 400,\n                  padding: 2,\n                  borderRadius: 4,\n                  borderColor: Colors.black100,\n                }}\n              >\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    justifyContent: \"space-between\",\n                  }}\n                >\n                  <Typography variant={\"h6\"} fontWeight={\"bold\"}>\n                    You pay\n                  </Typography>\n                  {/*<Button>*/}\n                  {/*    <Typography color={Colors.blue100}>Max</Typography>*/}\n                  {/*</Button>*/}\n                </Box>\n                <Box sx={{ display: \"flex\", flexDirection: \"column\" }}>\n                  <Box sx={{ alignSelf: \"flex-end\" }}>\n                    <TextField\n                      type={\"text\"}\n                      error={!isValueValid}\n                      value={value}\n                      placeholder={\"0\"}\n                      onChange={onValueChange}\n                      sx={{ m: 1, width: \"25ch\", textAlign: \"right\" }}\n                      variant={\"standard\"}\n                      inputProps={{\n                        min: 0,\n                        style: { textAlign: \"right\" },\n                      }}\n                      InputProps={{\n                        disableUnderline: true,\n                        endAdornment: (\n                          <InputAdornment position={\"end\"}>\n                            <Typography\n                              sx={{\n                                fontSize: 16,\n                                fontWeight: \"bold\",\n                              }}\n                            >\n                              {selectedCoin?.symbol.toUpperCase()}\n                            </Typography>\n                          </InputAdornment>\n                        ),\n                      }}\n                    />\n                  </Box>\n                  <Box sx={{ alignSelf: \"flex-end\", paddingRight: 2 }}>\n                    <Typography>= $ {currencyValue.toFixed(2)}</Typography>\n                  </Box>\n                </Box>\n              </Card>\n              <Box\n                sx={{\n                  display: \"flex\",\n                  flexDirection: \"row\",\n                  justifyContent: \"flex-start\",\n                  mt: 2,\n                }}\n              >\n                {coins.map((coin) => {\n                  return (\n                    <Button\n                      key={`coin-${coin.id}`}\n                      component={\"span\"}\n                      sx={{\n                        display: \"flex\",\n                        flexDirection: \"row\",\n                        alignItems: \"center\",\n                        border: \"1px solid grey\",\n                        padding: 1,\n                        borderRadius: 4,\n                        mr: 1,\n                      }}\n                      onClick={() => setSelectedCoin(coin)}\n                    >\n                      <Avatar\n                        alt={coin.id}\n                        src={coin.image}\n                        sx={{ marginRight: 1, width: 24, height: 24 }}\n                      />\n                      <Typography color={Colors.black100}>\n                        {coin.symbol.toUpperCase()}\n                      </Typography>\n                    </Button>\n                  );\n                })}\n              </Box>\n            </Box>\n            <Box>\n              <Card\n                variant={\"outlined\"}\n                sx={{\n                  width: 400,\n                  padding: 2,\n                  borderRadius: 4,\n                  borderColor: Colors.black100,\n                }}\n              >\n                <Box>\n                  <Typography variant={\"h6\"} fontWeight={\"bold\"}>\n                    Storage duration\n                  </Typography>\n                </Box>\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    justifyContent: \"space-between\",\n                    mt: 2,\n                  }}\n                >\n                  <Button\n                    sx={{\n                      border: \"1px solid grey\",\n                      borderRadius: 8,\n                      borderColor:\n                        storageDuration === ONE_MONTH\n                          ? Colors.black100\n                          : Colors.grey50,\n                    }}\n                    onClick={() => {\n                      setStorageDuration(ONE_MONTH);\n                      setSelectedDate(addDays(today, ONE_MONTH));\n                    }}\n                  >\n                    <Typography\n                      fontSize={14}\n                      color={\n                        storageDuration === ONE_MONTH\n                          ? Colors.black100\n                          : Colors.grey50\n                      }\n                    >\n                      One month\n                    </Typography>\n                  </Button>\n                  <Button\n                    sx={{\n                      border: \"1px solid grey\",\n                      borderRadius: 8,\n                      borderColor:\n                        storageDuration === THREE_MONTH\n                          ? Colors.black100\n                          : Colors.grey50,\n                    }}\n                    onClick={() => {\n                      setStorageDuration(THREE_MONTH);\n                      setSelectedDate(addDays(today, THREE_MONTH));\n                    }}\n                  >\n                    <Typography\n                      fontSize={14}\n                      color={\n                        storageDuration === THREE_MONTH\n                          ? Colors.black100\n                          : Colors.grey50\n                      }\n                    >\n                      Three months\n                    </Typography>\n                  </Button>\n                  <Button\n                    sx={{\n                      border: \"1px solid grey\",\n                      borderRadius: 8,\n                      borderColor:\n                        storageDuration === HALF_YEAR\n                          ? Colors.black100\n                          : Colors.grey50,\n                    }}\n                    onClick={() => {\n                      setStorageDuration(HALF_YEAR);\n                      setSelectedDate(addDays(today, HALF_YEAR));\n                    }}\n                  >\n                    <Typography\n                      fontSize={14}\n                      color={\n                        storageDuration === HALF_YEAR\n                          ? Colors.black100\n                          : Colors.grey50\n                      }\n                    >\n                      Half year\n                    </Typography>\n                  </Button>\n                </Box>\n                <Box sx={{ mt: 1, mb: 2 }}>\n                  <Typography>Customization</Typography>\n                </Box>\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Box sx={{ mr: 2 }}>\n                    <LocalizationProvider dateAdapter={AdapterDateFns}>\n                      <DatePicker\n                        disabled\n                        todayText={\"Today\"}\n                        label=\"Start\"\n                        value={today}\n                        onChange={(newValue) => {\n                          // handleDateChange(newValue);\n                        }}\n                        renderInput={(params) => <TextField {...params} />}\n                      />\n                    </LocalizationProvider>\n                  </Box>\n                  <Box>\n                    <LocalizationProvider dateAdapter={AdapterDateFns}>\n                      <DatePicker\n                        label=\"End\"\n                        value={selectedDate}\n                        onChange={(newValue) => {\n                          newValue && setSelectedDate(newValue);\n                        }}\n                        shouldDisableDate={(day) => {\n                          if (day) {\n                            day.setHours(0, 0, 0, 0);\n                            return differenceInDays(day, today) < 30;\n                          }\n                          return false;\n                        }}\n                        renderInput={(params) => <TextField {...params} />}\n                      />\n                    </LocalizationProvider>\n                  </Box>\n                </Box>\n              </Card>\n            </Box>\n          </Box>\n          {account ? (\n            <Box sx={{ mt: 2, display: \"flex\", flexDirection: \"column\" }}>\n              <Typography>Your account: {account}</Typography>\n              <Box sx={{ display: \"flex\", flexDirection: \"row\", gap: 3 }}>\n                <BaseColoredButton\n                  loading={isDepositing}\n                  sx={{ height: 32 }}\n                  onClick={handleTimeDeposit}\n                  disable={BigInt(value) <= 0}\n                >\n                  <Typography>Deposit now</Typography>\n                </BaseColoredButton>\n              </Box>\n            </Box>\n          ) : (\n            <Box\n              sx={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                mt: 2,\n              }}\n            >\n              {!account && (\n                <BaseColoredButton\n                  sx={{ height: 32 }}\n                  onClick={handleConnectWallet}\n                >\n                  <Typography>Connect Wallet</Typography>\n                </BaseColoredButton>\n              )}\n            </Box>\n          )}\n        </Box>\n        <Dialog open={shouldShowApproval}>\n          <DialogTitle>{\"Please approve for Deposit\"}</DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n              We detected that you have not approved an allowance to Deposit\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            {isApproving ? (\n              <LoadingButton loading />\n            ) : (\n              <>\n                <Button onClick={handleRejectApproval}>Disagree</Button>\n                <Button onClick={handleApproval} autoFocus>\n                  Ok, Approve\n                </Button>\n              </>\n            )}\n          </DialogActions>\n        </Dialog>\n        <Dialog open={!!errorMessage}>\n          <DialogTitle>{\"Transaction Failed\"}</DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n              Transaction has failed, reason: {errorMessage}\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setErrorMessage(\"\")} autoFocus>\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </Box>\n      {deposits.length > 0 && (\n        <Box sx={{ mt: 8 }}>\n          <Typography\n            color={Colors.black100}\n            textAlign={\"center\"}\n            variant={\"h4\"}\n          >\n            Your Deposits\n          </Typography>\n          <TableContainer component={Paper} sx={{ width: \"100%\", mt: 2 }}>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>\n                    <Title>ID</Title>\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <Title>Asset</Title>\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <Title>Time</Title>\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <Title>Amount</Title>\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <Title>Price</Title>\n                  </TableCell>\n                  {/*<TableCell align=\"right\">*/}\n                  {/*    <Title>User</Title>*/}\n                  {/*</TableCell>*/}\n                  <TableCell align=\"right\">\n                    <Title>Action</Title>\n                  </TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {deposits.map((d) => {\n                  return (\n                    <TableRow\n                      key={d.id}\n                      sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n                    >\n                      <TableCell\n                        sx={{\n                          display: \"flex\",\n                          flexDirection: \"row\",\n                          alignItems: \"center\",\n                          fontSize: 16,\n                          justifyContent: \"flex-start\",\n                        }}\n                      >\n                        {d.id}\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        {selectedCoin ? (\n                          <Box\n                            sx={{\n                              display: \"flex\",\n                              flexDirection: \"row\",\n                              alignItems: \"center\",\n                            }}\n                          >\n                            <Avatar\n                              alt={selectedCoin.id}\n                              src={selectedCoin.image}\n                              sx={{ marginRight: 1, width: 24, height: 24 }}\n                            />\n                            <Typography color={Colors.black100}>\n                              {selectedCoin.symbol.toUpperCase()}\n                            </Typography>\n                          </Box>\n                        ) : (\n                          <Typography>{d.asset}</Typography>\n                        )}\n                      </TableCell>\n                      <TableCell align=\"right\">{d.time}</TableCell>\n                      <TableCell align=\"right\">{d.amount}</TableCell>\n                      <TableCell align=\"right\">{d.price}</TableCell>\n                      {/*<TableCell align=\"right\">{d.user}</TableCell>*/}\n                      <TableCell align=\"right\" valign={\"middle\"}>\n                        {!d.isWithdraw && (\n                          <BaseColoredButton\n                            loading={withdrawingTable[d.id]}\n                            sx={{ height: 32, mt: 0 }}\n                            onClick={() => handleWithdraw(parseInt(d.id))}\n                          >\n                            <Typography>Withdraw</Typography>\n                          </BaseColoredButton>\n                        )}\n                      </TableCell>\n                    </TableRow>\n                  );\n                })}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Box>\n      )}\n    </Container>\n  );\n};\n\nexport default SimpleDeposit;\n"],"mappings":"sqBAAA,MAAOA,CAAAA,KAAP,EAIEC,SAJF,CAKEC,OALF,CAMEC,QANF,KAOO,OAPP,CAQA,OACEC,MADF,CAEEC,GAFF,CAGEC,MAHF,CAIEC,IAJF,CAKEC,SALF,CAMEC,MANF,CAOEC,aAPF,CAQEC,aARF,CASEC,iBATF,CAUEC,WAVF,CAWEC,cAXF,CAYEC,KAZF,CAaEC,KAbF,CAcEC,SAdF,CAeEC,SAfF,CAgBEC,cAhBF,CAiBEC,SAjBF,CAkBEC,QAlBF,CAmBEC,SAnBF,CAoBEC,UApBF,KAqBO,eArBP,CAsBA,OAASC,MAAT,KAAuB,qBAAvB,CAEA,OAASC,cAAT,KAA+B,oCAA/B,CACA,OAASC,oBAAT,KAAqC,0CAArC,CACA,OAASC,UAAT,KAA2B,gCAA3B,CACA,OAASC,OAAT,CAAkBC,gBAAlB,CAAoCC,MAApC,KAAkD,UAAlD,CACA,OACEC,eADF,CAEEC,WAFF,CAGEC,YAHF,CAIEC,QAJF,CAKEC,QALF,CAMEC,YANF,KAOO,gBAPP,CAQA,MAAOC,CAAAA,iBAAP,KAA8B,qBAA9B,CACA,OAASC,IAAT,KAAqB,gCAArB,CACA,OAASC,aAAT,KAA8B,UAA9B,C,6IAEA,GAAMC,CAAAA,KAAgD,CAAG,QAAnDA,CAAAA,KAAmD,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,CACzE,mBAAO,KAAC,UAAD,EAAY,EAAE,CAAE,CAAEC,KAAK,CAAElB,MAAM,CAACmB,MAAhB,CAAhB,UAA2CF,QAA3C,EAAP,CACD,CAFD,CAIA;AACA,GAAMG,CAAAA,KAAK,CAAG,CAAC,UAAD,CAAd,CAEA,GAAMC,CAAAA,KAAK,CAAG,GAAIC,CAAAA,MAAJ,CAAW,qBAAX,CAAd,CAEA,GAAMC,CAAAA,SAAS,CAAG,EAAlB,CACA,GAAMC,CAAAA,WAAW,CAAG,EAApB,CACA,GAAMC,CAAAA,SAAS,CAAG,GAAlB,CAEA,GAAMC,CAAAA,aAAiB,CAAG,QAApBA,CAAAA,aAAoB,EAAM,CAC9B,GAAMC,CAAAA,KAAK,CAAGjD,OAAO,CAAC,UAAM,CAC1B,GAAMkD,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,EAAb,CACAD,IAAI,CAACE,QAAL,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,EACA,MAAOF,CAAAA,IAAP,CACD,CAJoB,CAIlB,EAJkB,CAArB,CAMA,cAA0BjD,QAAQ,CAAmB,EAAnB,CAAlC,wCAAOoD,KAAP,eAAcC,QAAd,eACA,eAAwCrD,QAAQ,CAAwB,IAAxB,CAAhD,yCAAOsD,YAAP,eAAqBC,eAArB,eACA,eAA0BvD,QAAQ,CAAC,EAAD,CAAlC,yCAAOwD,KAAP,eAAcC,QAAd,eACA,eAA0CzD,QAAQ,CAAC,CAAD,CAAlD,yCAAO0D,aAAP,eAAsBC,gBAAtB,eACA,eAAsC3D,QAAQ,CAAC,IAAD,CAA9C,0CAAO4D,YAAP,gBAAqBC,aAArB,gBACA,gBAAwC7D,QAAQ,CAC9CyB,OAAO,CAACuB,KAAD,CAAQJ,SAAR,CADuC,CAAhD,2CAAOkB,YAAP,gBAAqBC,eAArB,gBAGA,gBAA8C/D,QAAQ,CAAC4C,SAAD,CAAtD,2CAAOoB,eAAP,gBAAwBC,kBAAxB,gBAEAnE,SAAS,CAAC,UAAM,CACdoE,KAAK,8EACmEzB,KAAK,CAAC0B,IAAN,CACpE,KADoE,CADnE,EAAL,CAKGC,IALH,CAKQ,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EALR,EAMGF,IANH,CAMQ,SAACG,IAAD,CAAU,CACdlB,QAAQ,CAACkB,IAAD,CAAR,CACD,CARH,EASD,CAVQ,CAUN,EAVM,CAAT,CAWAzE,SAAS,CAAC,UAAM,CACd,GAAIsD,KAAK,CAACoB,MAAN,CAAe,CAAnB,CAAsB,CACpBjB,eAAe,CAACH,KAAK,CAAC,CAAD,CAAN,CAAf,CACD,CACF,CAJQ,CAIN,CAACA,KAAD,CAJM,CAAT,CAKAtD,SAAS,CAAC,UAAM,CACd,GAAI8D,YAAY,EAAIN,YAApB,CAAkC,CAChC,GAAMmB,CAAAA,CAAC,CAAGC,UAAU,CAAClB,KAAD,CAAV,CAAoBF,YAAY,CAACqB,aAAjC,EAAkD,CAA5D,CACAhB,gBAAgB,CAACc,CAAD,CAAhB,CACD,CAHD,IAGO,CACLd,gBAAgB,CAAC,CAAD,CAAhB,CACD,CACF,CAPQ,CAON,CAACH,KAAD,CAAQI,YAAR,CAAsBN,YAAtB,CAPM,CAAT,CASAxD,SAAS,CAAC,UAAM,CACdmE,kBAAkB,CAACvC,gBAAgB,CAACoC,YAAD,CAAed,KAAf,CAAjB,CAAlB,CACD,CAFQ,CAEN,CAACc,YAAD,CAAed,KAAf,CAFM,CAAT,CAIA,GAAM4B,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAA4C,CAChE,GAAMrB,CAAAA,KAAK,CAAGqB,CAAC,CAACC,MAAF,CAAStB,KAAvB,CACA,GAAIA,KAAK,GAAK,EAAd,CAAkB,CAChB,GAAIA,KAAK,CAACuB,UAAN,CAAiB,GAAjB,CAAJ,CAA2B,CACzBlB,aAAa,CAAC,KAAD,CAAb,CACD,CAFD,IAEO,CACLA,aAAa,CAACnB,KAAK,CAACsC,IAAN,CAAWxB,KAAX,CAAD,CAAb,CACD,CACF,CAND,IAMO,CACLK,aAAa,CAAC,IAAD,CAAb,CACD,CACDJ,QAAQ,CAACD,KAAD,CAAR,CACD,CAZD,CAcA,gBAA8BxD,QAAQ,CAAC,EAAD,CAAtC,2CAAOiF,OAAP,gBAAgBC,UAAhB,gBAEA,GAAMC,CAAAA,YAAY,2FAAG,iBAAOC,IAAP,CAAkBH,OAAlB,kHACnBC,UAAU,CAACD,OAAD,CAAV,CADmB,sDAAH,kBAAZE,CAAAA,YAAY,iDAAlB,CAIArF,SAAS,CAAC,UAAM,CACd,GAAImF,OAAJ,CAAa,CACXI,eAAe,GACfC,kBAAkB,GACnB,CACF,CALQ,CAKN,CAACL,OAAD,CALM,CAAT,CAOA,GAAMM,CAAAA,mBAAmB,2FAAG,+JACpB3D,CAAAA,eAAe,CAACuD,YAAD,CADK,yDAAH,kBAAnBI,CAAAA,mBAAmB,2CAAzB,CAIA,gBAAsCvF,QAAQ,CAAC,KAAD,CAA9C,2CAAOwF,YAAP,gBAAqBC,aAArB,gBAEA,GAAMC,CAAAA,iBAAiB,2FAAG,wIACxBD,aAAa,CAAC,IAAD,CAAb,CADwB,uBAElB5D,CAAAA,WAAW,CACfoD,OADe,CAEf9C,IAFe,CAGfwD,MAAM,CAACnC,KAAD,CAAN,CAAgBmC,MAAM,UAAC,EAAD,CAAO,EAAP,EAHP,CAIf3B,eAAe,CAAG,EAAlB,CAAuB,EAAvB,CAA4B,EAJb,CAKf,SAAC4B,OAAD,CAAkB,CAChBC,OAAO,CAACC,GAAR,CAAYF,OAAZ,EACAH,aAAa,CAAC,KAAD,CAAb,CACAH,kBAAkB,GACnB,CATc,CAUf,SAACS,KAAD,CAAgB,CACdF,OAAO,CAACC,GAAR,CAAYC,KAAZ,EACAN,aAAa,CAAC,KAAD,CAAb,CACAO,kBAAkB,CAACD,KAAD,CAAQ,gBAAR,CAAlB,CACD,CAdc,CAFO,yDAAH,kBAAjBL,CAAAA,iBAAiB,2CAAvB,CAoBA,gBAA8C1F,QAAQ,CAAC,KAAD,CAAtD,2CAAOiG,kBAAP,gBAA2BC,eAA3B,gBAEA,GAAMb,CAAAA,eAAe,2FAAG,6KACEvD,CAAAA,YAAY,CAACmD,OAAD,CADd,QAChBkB,SADgB,gBAEtBN,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyBK,SAAzB,EACA,GAAIC,QAAQ,CAACD,SAAD,CAAR,GAAwB,CAA5B,CAA+B,CAC7BD,eAAe,CAAC,IAAD,CAAf,CACD,CAFD,IAEO,CACLA,eAAe,CAAC,KAAD,CAAf,CACD,CAPqB,wDAAH,kBAAfb,CAAAA,eAAe,2CAArB,CAUA,gBAAoCrF,QAAQ,CAAC,KAAD,CAA5C,2CAAOqG,WAAP,gBAAoBC,YAApB,gBAEA,gBAAwCtG,QAAQ,CAAC,EAAD,CAAhD,2CAAOuG,YAAP,gBAAqBC,eAArB,gBAEA,GAAMR,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACD,KAAD,CAAaU,WAAb,CAAqC,CAC9D,GAAI,MAAOV,CAAAA,KAAP,GAAiB,QAArB,CAA+B,CAC7BS,eAAe,CAACT,KAAD,CAAf,CACA,OACD,CACD,GAAI,MAAOA,CAAAA,KAAP,GAAiB,QAArB,CAA+B,CAC7B,GAAIA,KAAK,CAACW,OAAV,CAAmB,CACjBF,eAAe,CAACT,KAAK,CAACW,OAAP,CAAf,CACD,CACD,OACD,CACDF,eAAe,CAACC,WAAD,CAAf,CACD,CAZD,CAcA,GAAME,CAAAA,cAAc,2FAAG,yJAEnBL,YAAY,CAAC,IAAD,CAAZ,CAFmB,uBAGbvE,CAAAA,QAAQ,CAACkD,OAAD,CAHK,QAInBqB,YAAY,CAAC,KAAD,CAAZ,CACAJ,eAAe,CAAC,KAAD,CAAf,CALmB,mFAOnBL,OAAO,CAACE,KAAR,eACAO,YAAY,CAAC,KAAD,CAAZ,CACAN,kBAAkB,cAAQ,iBAAR,CAAlB,CACAd,UAAU,CAAC,EAAD,CAAV,CACAgB,eAAe,CAAC,KAAD,CAAf,CAXmB,sEAAH,kBAAdS,CAAAA,cAAc,2CAApB,CAeA,gBAAgC3G,QAAQ,CAAgB,EAAhB,CAAxC,2CAAO4G,QAAP,gBAAiBC,WAAjB,gBAEA,GAAMvB,CAAAA,kBAAkB,2FAAG,0KAEhBrD,CAAAA,YAAY,CAACgD,OAAD,CAFI,QACnB6B,MADmB,gBAKvBC,GALuB,CAKnB,SAACC,CAAD,CAAO,CACX,sBAA2DA,CAA3D,IAAOC,IAAP,OAAaC,KAAb,OAAoBC,EAApB,OAAwBC,IAAxB,OAA8BC,MAA9B,OAAsCC,KAAtC,OAA6CC,UAA7C,OACA,MAAO,CACLN,IAAI,CAAJA,IADK,CAELC,KAAK,CAALA,KAFK,CAGLC,EAAE,CAAFA,EAHK,CAILC,IAAI,WAAKzF,MAAM,CAAC,GAAIuB,CAAAA,IAAJ,CAASkD,QAAQ,CAACgB,IAAD,CAAR,CAAiB,IAA1B,CAAD,CAAkC,YAAlC,CAAX,CAJC,CAKLC,MAAM,WAAK1B,MAAM,CAAC0B,MAAD,CAAN,CAAiB1B,MAAM,UAAC,EAAD,CAAO,EAAP,EAA5B,CALD,CAML2B,KAAK,aAAOlB,QAAQ,CAACkB,KAAD,CAAR,CAAkB,OAAzB,CANA,CAOLC,UAAU,CAAVA,UAPK,CAAP,CASD,CAhBwB,EAiBzBV,WAAW,CAACC,MAAM,CAACU,MAAP,CAAc,SAACR,CAAD,QAAO,CAACA,CAAC,CAACO,UAAV,EAAd,CAAD,CAAX,CAjByB,wDAAH,kBAAlBjC,CAAAA,kBAAkB,2CAAxB,CAoBA,GAAMmC,CAAAA,oBAAoB,2FAAG,wIAC3BvC,UAAU,CAAC,EAAD,CAAV,CACAgB,eAAe,CAAC,KAAD,CAAf,CAF2B,wDAAH,kBAApBuB,CAAAA,oBAAoB,2CAA1B,CAKA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAClE,KAAD,CAAiB2D,EAAjB,CAAgC,CACrDQ,mBAAmB,gCACdC,gBADc,qBAEXT,EAFW,CAEN3D,KAFM,GAAnB,CAID,CALD,CAOA,gBAAgDxD,QAAQ,CAErD,EAFqD,CAAxD,2CAAO4H,gBAAP,gBAAyBD,mBAAzB,gBAIA7H,SAAS,CAAC,UAAM,CACd6H,mBAAmB,CACjBf,QAAQ,CAACiB,MAAT,CAA2C,SAACC,GAAD,CAAMC,GAAN,CAAc,CACvDD,GAAG,CAACC,GAAG,CAACZ,EAAL,CAAH,CAAc,KAAd,CACA,MAAOW,CAAAA,GAAP,CACD,CAHD,CAGG,EAHH,CADiB,CAAnB,CAMD,CAPQ,CAON,CAAClB,QAAD,CAPM,CAAT,CASA,GAAMoB,CAAAA,cAAc,2FAAG,kBAAOb,EAAP,sHACrBO,cAAc,CAAC,IAAD,WAAUP,EAAV,EAAd,CADqB,uBAEfnF,CAAAA,QAAQ,CACZiD,OADY,CAEZkC,EAFY,CAGZ,SAACvB,OAAD,CAAkB,CAChBC,OAAO,CAACC,GAAR,CAAYF,OAAZ,EACA8B,cAAc,CAAC,KAAD,WAAWP,EAAX,EAAd,CACA7B,kBAAkB,GACnB,CAPW,CAQZ,SAACS,KAAD,CAAgB,CACd2B,cAAc,CAAC,KAAD,WAAWP,EAAX,EAAd,CACAtB,OAAO,CAACE,KAAR,CAAcA,KAAd,EACAC,kBAAkB,CAACD,KAAD,CAAQ,iBAAR,CAAlB,CACD,CAZW,CAFO,yDAAH,kBAAdiC,CAAAA,cAAc,8CAApB,CAkBA,mBACE,MAAC,SAAD,EACE,QAAQ,CAAE,IADZ,CAEE,EAAE,CAAE,CACFC,EAAE,CAAE,CADF,CAEFC,QAAQ,CAAE,EAFR,CAFN,wBAOE,MAAC,GAAD,EAAK,EAAE,CAAE,CAAEC,KAAK,CAAE,OAAT,CAAkBC,UAAU,CAAE,MAA9B,CAAsCC,WAAW,CAAE,MAAnD,CAAT,wBACE,MAAC,GAAD,EACE,EAAE,CAAE,CACFC,OAAO,CAAE,MADP,CAEFC,aAAa,CAAE,QAFb,CAGFC,UAAU,CAAE,QAHV,CAIFP,EAAE,CAAE,CAJF,CADN,wBAQE,KAAC,UAAD,EAAY,OAAO,CAAE,IAArB,CAA2B,SAAS,CAAE,MAAtC,CAA8C,KAAK,CAAE5G,MAAM,CAACoH,OAA5D,yBARF,cAWE,KAAC,UAAD,EAAY,OAAO,CAAE,IAArB,CAA2B,SAAS,CAAE,MAAtC,wBAXF,GADF,cAgBE,MAAC,GAAD,yBACE,MAAC,GAAD,EACE,EAAE,CAAE,CACFH,OAAO,CAAE,MADP,CAEFC,aAAa,CAAE,KAFb,CAGFG,cAAc,CAAE,eAHd,CADN,wBAOE,MAAC,GAAD,yBACE,MAAC,IAAD,EACE,OAAO,CAAE,UADX,CAEE,EAAE,CAAE,CACFP,KAAK,CAAE,GADL,CAEFQ,OAAO,CAAE,CAFP,CAGFC,YAAY,CAAE,CAHZ,CAIFC,WAAW,CAAExH,MAAM,CAACyH,QAJlB,CAFN,wBASE,KAAC,GAAD,EACE,EAAE,CAAE,CACFR,OAAO,CAAE,MADP,CAEFC,aAAa,CAAE,KAFb,CAGFG,cAAc,CAAE,eAHd,CADN,uBAOE,KAAC,UAAD,EAAY,OAAO,CAAE,IAArB,CAA2B,UAAU,CAAE,MAAvC,qBAPF,EATF,cAuBE,MAAC,GAAD,EAAK,EAAE,CAAE,CAAEJ,OAAO,CAAE,MAAX,CAAmBC,aAAa,CAAE,QAAlC,CAAT,wBACE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAEQ,SAAS,CAAE,UAAb,CAAT,uBACE,KAAC,SAAD,EACE,IAAI,CAAE,MADR,CAEE,KAAK,CAAE,CAACnF,YAFV,CAGE,KAAK,CAAEJ,KAHT,CAIE,WAAW,CAAE,GAJf,CAKE,QAAQ,CAAEoB,aALZ,CAME,EAAE,CAAE,CAAEoE,CAAC,CAAE,CAAL,CAAQb,KAAK,CAAE,MAAf,CAAuBc,SAAS,CAAE,OAAlC,CANN,CAOE,OAAO,CAAE,UAPX,CAQE,UAAU,CAAE,CACVC,GAAG,CAAE,CADK,CAEVC,KAAK,CAAE,CAAEF,SAAS,CAAE,OAAb,CAFG,CARd,CAYE,UAAU,CAAE,CACVG,gBAAgB,CAAE,IADR,CAEVC,YAAY,cACV,KAAC,cAAD,EAAgB,QAAQ,CAAE,KAA1B,uBACE,KAAC,UAAD,EACE,EAAE,CAAE,CACFC,QAAQ,CAAE,EADR,CAEFC,UAAU,CAAE,MAFV,CADN,UAMGjG,YANH,SAMGA,YANH,iBAMGA,YAAY,CAAEkG,MAAd,CAAqBC,WAArB,EANH,EADF,EAHQ,CAZd,EADF,EADF,cA+BE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAEV,SAAS,CAAE,UAAb,CAAyBW,YAAY,CAAE,CAAvC,CAAT,uBACE,MAAC,UAAD,mBAAiBhG,aAAa,CAACiG,OAAd,CAAsB,CAAtB,CAAjB,GADF,EA/BF,GAvBF,GADF,cA4DE,KAAC,GAAD,EACE,EAAE,CAAE,CACFrB,OAAO,CAAE,MADP,CAEFC,aAAa,CAAE,KAFb,CAGFG,cAAc,CAAE,YAHd,CAIFkB,EAAE,CAAE,CAJF,CADN,UAQGxG,KAAK,CAAC2D,GAAN,CAAU,SAAC8C,IAAD,CAAU,CACnB,mBACE,MAAC,MAAD,EAEE,SAAS,CAAE,MAFb,CAGE,EAAE,CAAE,CACFvB,OAAO,CAAE,MADP,CAEFC,aAAa,CAAE,KAFb,CAGFC,UAAU,CAAE,QAHV,CAIFsB,MAAM,CAAE,gBAJN,CAKFnB,OAAO,CAAE,CALP,CAMFC,YAAY,CAAE,CANZ,CAOFmB,EAAE,CAAE,CAPF,CAHN,CAYE,OAAO,CAAE,yBAAMxG,CAAAA,eAAe,CAACsG,IAAD,CAArB,EAZX,wBAcE,KAAC,MAAD,EACE,GAAG,CAAEA,IAAI,CAAC1C,EADZ,CAEE,GAAG,CAAE0C,IAAI,CAACG,KAFZ,CAGE,EAAE,CAAE,CAAE3B,WAAW,CAAE,CAAf,CAAkBF,KAAK,CAAE,EAAzB,CAA6B8B,MAAM,CAAE,EAArC,CAHN,EAdF,cAmBE,KAAC,UAAD,EAAY,KAAK,CAAE5I,MAAM,CAACyH,QAA1B,UACGe,IAAI,CAACL,MAAL,CAAYC,WAAZ,EADH,EAnBF,kBACeI,IAAI,CAAC1C,EADpB,EADF,CAyBD,CA1BA,CARH,EA5DF,GAPF,cAwGE,KAAC,GAAD,wBACE,MAAC,IAAD,EACE,OAAO,CAAE,UADX,CAEE,EAAE,CAAE,CACFgB,KAAK,CAAE,GADL,CAEFQ,OAAO,CAAE,CAFP,CAGFC,YAAY,CAAE,CAHZ,CAIFC,WAAW,CAAExH,MAAM,CAACyH,QAJlB,CAFN,wBASE,KAAC,GAAD,wBACE,KAAC,UAAD,EAAY,OAAO,CAAE,IAArB,CAA2B,UAAU,CAAE,MAAvC,8BADF,EATF,cAcE,MAAC,GAAD,EACE,EAAE,CAAE,CACFR,OAAO,CAAE,MADP,CAEFC,aAAa,CAAE,KAFb,CAGFG,cAAc,CAAE,eAHd,CAIFkB,EAAE,CAAE,CAJF,CADN,wBAQE,KAAC,MAAD,EACE,EAAE,CAAE,CACFE,MAAM,CAAE,gBADN,CAEFlB,YAAY,CAAE,CAFZ,CAGFC,WAAW,CACT7E,eAAe,GAAKpB,SAApB,CACIvB,MAAM,CAACyH,QADX,CAEIzH,MAAM,CAACmB,MANX,CADN,CASE,OAAO,CAAE,kBAAM,CACbyB,kBAAkB,CAACrB,SAAD,CAAlB,CACAmB,eAAe,CAACtC,OAAO,CAACuB,KAAD,CAAQJ,SAAR,CAAR,CAAf,CACD,CAZH,uBAcE,KAAC,UAAD,EACE,QAAQ,CAAE,EADZ,CAEE,KAAK,CACHoB,eAAe,GAAKpB,SAApB,CACIvB,MAAM,CAACyH,QADX,CAEIzH,MAAM,CAACmB,MALf,uBAdF,EARF,cAiCE,KAAC,MAAD,EACE,EAAE,CAAE,CACFsH,MAAM,CAAE,gBADN,CAEFlB,YAAY,CAAE,CAFZ,CAGFC,WAAW,CACT7E,eAAe,GAAKnB,WAApB,CACIxB,MAAM,CAACyH,QADX,CAEIzH,MAAM,CAACmB,MANX,CADN,CASE,OAAO,CAAE,kBAAM,CACbyB,kBAAkB,CAACpB,WAAD,CAAlB,CACAkB,eAAe,CAACtC,OAAO,CAACuB,KAAD,CAAQH,WAAR,CAAR,CAAf,CACD,CAZH,uBAcE,KAAC,UAAD,EACE,QAAQ,CAAE,EADZ,CAEE,KAAK,CACHmB,eAAe,GAAKnB,WAApB,CACIxB,MAAM,CAACyH,QADX,CAEIzH,MAAM,CAACmB,MALf,0BAdF,EAjCF,cA0DE,KAAC,MAAD,EACE,EAAE,CAAE,CACFsH,MAAM,CAAE,gBADN,CAEFlB,YAAY,CAAE,CAFZ,CAGFC,WAAW,CACT7E,eAAe,GAAKlB,SAApB,CACIzB,MAAM,CAACyH,QADX,CAEIzH,MAAM,CAACmB,MANX,CADN,CASE,OAAO,CAAE,kBAAM,CACbyB,kBAAkB,CAACnB,SAAD,CAAlB,CACAiB,eAAe,CAACtC,OAAO,CAACuB,KAAD,CAAQF,SAAR,CAAR,CAAf,CACD,CAZH,uBAcE,KAAC,UAAD,EACE,QAAQ,CAAE,EADZ,CAEE,KAAK,CACHkB,eAAe,GAAKlB,SAApB,CACIzB,MAAM,CAACyH,QADX,CAEIzH,MAAM,CAACmB,MALf,uBAdF,EA1DF,GAdF,cAkGE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAEoH,EAAE,CAAE,CAAN,CAAS3B,EAAE,CAAE,CAAb,CAAT,uBACE,KAAC,UAAD,4BADF,EAlGF,cAqGE,MAAC,GAAD,EACE,EAAE,CAAE,CACFK,OAAO,CAAE,MADP,CAEFC,aAAa,CAAE,KAFb,CAGFC,UAAU,CAAE,QAHV,CADN,wBAOE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAEuB,EAAE,CAAE,CAAN,CAAT,uBACE,KAAC,oBAAD,EAAsB,WAAW,CAAEzI,cAAnC,uBACE,KAAC,UAAD,EACE,QAAQ,KADV,CAEE,SAAS,CAAE,OAFb,CAGE,KAAK,CAAC,OAHR,CAIE,KAAK,CAAE0B,KAJT,CAKE,QAAQ,CAAE,kBAACkH,QAAD,CAAc,CACtB;AACD,CAPH,CAQE,WAAW,CAAE,qBAACC,MAAD,qBAAY,KAAC,SAAD,kBAAeA,MAAf,EAAZ,EARf,EADF,EADF,EAPF,cAqBE,KAAC,GAAD,wBACE,KAAC,oBAAD,EAAsB,WAAW,CAAE7I,cAAnC,uBACE,KAAC,UAAD,EACE,KAAK,CAAC,KADR,CAEE,KAAK,CAAEwC,YAFT,CAGE,QAAQ,CAAE,kBAACoG,QAAD,CAAc,CACtBA,QAAQ,EAAInG,eAAe,CAACmG,QAAD,CAA3B,CACD,CALH,CAME,iBAAiB,CAAE,2BAACE,GAAD,CAAS,CAC1B,GAAIA,GAAJ,CAAS,CACPA,GAAG,CAACjH,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,EACA,MAAOzB,CAAAA,gBAAgB,CAAC0I,GAAD,CAAMpH,KAAN,CAAhB,CAA+B,EAAtC,CACD,CACD,MAAO,MAAP,CACD,CAZH,CAaE,WAAW,CAAE,qBAACmH,MAAD,qBAAY,KAAC,SAAD,kBAAeA,MAAf,EAAZ,EAbf,EADF,EADF,EArBF,GArGF,GADF,EAxGF,GADF,CA2PGlF,OAAO,cACN,MAAC,GAAD,EAAK,EAAE,CAAE,CAAE2E,EAAE,CAAE,CAAN,CAAStB,OAAO,CAAE,MAAlB,CAA0BC,aAAa,CAAE,QAAzC,CAAT,wBACE,MAAC,UAAD,6BAA2BtD,OAA3B,GADF,cAEE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAEqD,OAAO,CAAE,MAAX,CAAmBC,aAAa,CAAE,KAAlC,CAAyC8B,GAAG,CAAE,CAA9C,CAAT,uBACE,KAAC,iBAAD,EACE,OAAO,CAAE7E,YADX,CAEE,EAAE,CAAE,CAAEyE,MAAM,CAAE,EAAV,CAFN,CAGE,OAAO,CAAEvE,iBAHX,CAIE,OAAO,CAAEC,MAAM,CAACnC,KAAD,CAAN,EAAiB,CAJ5B,uBAME,KAAC,UAAD,0BANF,EADF,EAFF,GADM,cAeN,KAAC,GAAD,EACE,EAAE,CAAE,CACF8E,OAAO,CAAE,MADP,CAEFC,aAAa,CAAE,QAFb,CAGFC,UAAU,CAAE,QAHV,CAIFE,cAAc,CAAE,QAJd,CAKFkB,EAAE,CAAE,CALF,CADN,UASG,CAAC3E,OAAD,eACC,KAAC,iBAAD,EACE,EAAE,CAAE,CAAEgF,MAAM,CAAE,EAAV,CADN,CAEE,OAAO,CAAE1E,mBAFX,uBAIE,KAAC,UAAD,6BAJF,EAVJ,EA1QJ,GAhBF,cA8SE,MAAC,MAAD,EAAQ,IAAI,CAAEU,kBAAd,wBACE,KAAC,WAAD,WAAc,4BAAd,EADF,cAEE,KAAC,aAAD,wBACE,KAAC,iBAAD,EAAmB,EAAE,CAAC,0BAAtB,4EADF,EAFF,cAOE,KAAC,aAAD,WACGI,WAAW,cACV,KAAC,aAAD,EAAe,OAAO,KAAtB,EADU,cAGV,wCACE,KAAC,MAAD,EAAQ,OAAO,CAAEoB,oBAAjB,sBADF,cAEE,KAAC,MAAD,EAAQ,OAAO,CAAEd,cAAjB,CAAiC,SAAS,KAA1C,yBAFF,GAJJ,EAPF,GA9SF,cAkUE,MAAC,MAAD,EAAQ,IAAI,CAAE,CAAC,CAACJ,YAAhB,wBACE,KAAC,WAAD,WAAc,oBAAd,EADF,cAEE,KAAC,aAAD,wBACE,MAAC,iBAAD,EAAmB,EAAE,CAAC,0BAAtB,8CACmCA,YADnC,GADF,EAFF,cAOE,KAAC,aAAD,wBACE,KAAC,MAAD,EAAQ,OAAO,CAAE,yBAAMC,CAAAA,eAAe,CAAC,EAAD,CAArB,EAAjB,CAA4C,SAAS,KAArD,mBADF,EAPF,GAlUF,GAPF,CAuVGI,QAAQ,CAACpC,MAAT,CAAkB,CAAlB,eACC,MAAC,GAAD,EAAK,EAAE,CAAE,CAAEoF,EAAE,CAAE,CAAN,CAAT,wBACE,KAAC,UAAD,EACE,KAAK,CAAEvI,MAAM,CAACyH,QADhB,CAEE,SAAS,CAAE,QAFb,CAGE,OAAO,CAAE,IAHX,2BADF,cAQE,KAAC,cAAD,EAAgB,SAAS,CAAElI,KAA3B,CAAkC,EAAE,CAAE,CAAEuH,KAAK,CAAE,MAAT,CAAiByB,EAAE,CAAE,CAArB,CAAtC,uBACE,MAAC,KAAD,yBACE,KAAC,SAAD,wBACE,MAAC,QAAD,yBACE,KAAC,SAAD,wBACE,KAAC,KAAD,iBADF,EADF,cAIE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,uBACE,KAAC,KAAD,oBADF,EAJF,cAOE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,uBACE,KAAC,KAAD,mBADF,EAPF,cAUE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,uBACE,KAAC,KAAD,qBADF,EAVF,cAaE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,uBACE,KAAC,KAAD,oBADF,EAbF,cAmBE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,uBACE,KAAC,KAAD,qBADF,EAnBF,GADF,EADF,cA0BE,KAAC,SAAD,WACGhD,QAAQ,CAACG,GAAT,CAAa,SAACC,CAAD,CAAO,CACnB,mBACE,MAAC,QAAD,EAEE,EAAE,CAAE,CAAE,mCAAoC,CAAE8C,MAAM,CAAE,CAAV,CAAtC,CAFN,wBAIE,KAAC,SAAD,EACE,EAAE,CAAE,CACFxB,OAAO,CAAE,MADP,CAEFC,aAAa,CAAE,KAFb,CAGFC,UAAU,CAAE,QAHV,CAIFc,QAAQ,CAAE,EAJR,CAKFZ,cAAc,CAAE,YALd,CADN,UASG1B,CAAC,CAACG,EATL,EAJF,cAeE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UACG7D,YAAY,cACX,MAAC,GAAD,EACE,EAAE,CAAE,CACFgF,OAAO,CAAE,MADP,CAEFC,aAAa,CAAE,KAFb,CAGFC,UAAU,CAAE,QAHV,CADN,wBAOE,KAAC,MAAD,EACE,GAAG,CAAElF,YAAY,CAAC6D,EADpB,CAEE,GAAG,CAAE7D,YAAY,CAAC0G,KAFpB,CAGE,EAAE,CAAE,CAAE3B,WAAW,CAAE,CAAf,CAAkBF,KAAK,CAAE,EAAzB,CAA6B8B,MAAM,CAAE,EAArC,CAHN,EAPF,cAYE,KAAC,UAAD,EAAY,KAAK,CAAE5I,MAAM,CAACyH,QAA1B,UACGxF,YAAY,CAACkG,MAAb,CAAoBC,WAApB,EADH,EAZF,GADW,cAkBX,KAAC,UAAD,WAAazC,CAAC,CAACE,KAAf,EAnBJ,EAfF,cAqCE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UAA0BF,CAAC,CAACI,IAA5B,EArCF,cAsCE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UAA0BJ,CAAC,CAACK,MAA5B,EAtCF,cAuCE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UAA0BL,CAAC,CAACM,KAA5B,EAvCF,cAyCE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,CAAyB,MAAM,CAAE,QAAjC,UACG,CAACN,CAAC,CAACO,UAAH,eACC,KAAC,iBAAD,EACE,OAAO,CAAEK,gBAAgB,CAACZ,CAAC,CAACG,EAAH,CAD3B,CAEE,EAAE,CAAE,CAAE8C,MAAM,CAAE,EAAV,CAAcL,EAAE,CAAE,CAAlB,CAFN,CAGE,OAAO,CAAE,yBAAM5B,CAAAA,cAAc,CAAC5B,QAAQ,CAACY,CAAC,CAACG,EAAH,CAAT,CAApB,EAHX,uBAKE,KAAC,UAAD,uBALF,EAFJ,EAzCF,GACOH,CAAC,CAACG,EADT,CADF,CAuDD,CAxDA,CADH,EA1BF,GADF,EARF,GAxVJ,GADF,CA6bD,CA9oBD,CAgpBA,cAAepE,CAAAA,aAAf"},"metadata":{},"sourceType":"module"}